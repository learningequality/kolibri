{% extends "kolibri/base.html" %}
{% load learn_tags %}

{% block content %}
  <script>
    {{kolibri}}.resources.ContentNodeResource.setChannel("{{ channel_id }}");
    var root_node = JSON.parse("{{ rootnode|escapejs }}");
    var root_node_pk = String(root_node.pk);
    var model = {{kolibri}}.resources.ContentNodeResource.createModel(root_node);
    model.synced = true;
    var collection = {{kolibri}}.resources.ContentNodeResource.getCollection({parent: root_node_pk}, JSON.parse("{{ nodes|escapejs }}"));
    collection.synced = true;

    // Get list of channels.
    var channels = JSON.parse("{{ channels | escapejs }}");
    // Create model for channels.
    var channelModel = {{kolibri}}.resources.ContentNodeResource.createModel(channels);
    channelModel.synced = true;
    var currentChannelId = channels[0].id; // TODO: API also fetches user-selected default channel or last visited via cookie.
  </script>
  {% learn_async_assets %}
  {% learn_assets %}
{% endblock %}
